# Generated by Django 4.2.11 on 2024-05-23 13:18

from django.db import migrations

def _create_agent_tool_resouces(apps, schema_editor):
    # TODO: Do we really need the RECURRING_REMINDER and ONE_OFF_REMINDER tools?
    Experiment = apps.get_model("experiments", "Experiment")
    AgentToolResource = apps.get_model("experiments", "AgentToolResource")
    from apps.experiments.models import AgentTools

    for experiment in Experiment.objects.filter(tools_enabled=True):
        AgentToolResource.objects.create(experiment=experiment, tool_name=AgentTools.RECURRING_REMINDER)
        AgentToolResource.objects.create(experiment=experiment, tool_name=AgentTools.ONE_OFF_REMINDER)
        

def _remove_agent_tool_resouces(apps, schema_editor):
    AgentToolResource = apps.get_model("experiments", "AgentToolResource")
    AgentToolResource.objects.all().delete()

class Migration(migrations.Migration):

    dependencies = [
        ('experiments', '0080_agenttoolresource'),
    ]

    operations = [migrations.RunPython(_create_agent_tool_resouces, _remove_agent_tool_resouces)]
