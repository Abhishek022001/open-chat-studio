# Generated by Django 4.2 on 2023-10-24 12:01

from django.db import migrations


def bootstrap_llm_providers(apps, schema_editor):
    Team = apps.get_model("teams", "Team")
    LlmProvider = apps.get_model("llm_providers", "LlmProvider")
    Experiment = apps.get_model("experiments", "Experiment")

    for team in Team.objects.all():
        provider = LlmProvider.objects.filter(team=team).first()
        if not provider:
            continue

        Experiment.objects.filter(team=team).update(llm_provider=provider)


class Migration(migrations.Migration):
    initial = True

    dependencies = [
        ("experiments", "0046_experiment_llm_provider_and_more"),
    ]

    operations = [
        migrations.RunPython(bootstrap_llm_providers)
    ]
