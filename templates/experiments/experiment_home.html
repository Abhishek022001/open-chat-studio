{% extends 'web/app/app_base.html' %}
{% block app %}
<div class="app-card">
  <div class="grid grid-cols-6">
    <div class="col-span-5">
      <h1 class="pg-title">Experiments</h1>
    </div>
    {% if request.user.is_superuser %}
    <div class="justify-self-end">
      <a class="btn btn-primary btn-sm" href="{% url "experiments:new" request.team.slug %}">Add new</a>
    </div>
    {% endif %}
  </div>
  <hr class="m-2">
  <div class="overflow-x-auto">
  <table class="pg-table">
  <thead>
  <tr>
    <th>Experiment Name</th>
    <th>Experiment Description</th>
    <th>Bot</th>
    <th>Topic</th>
    <th>Actions</th>
  </tr>
  </thead>
  <tbody>
  {% for experiment in experiments %}
    <tr>
      <td><a href="{% url 'experiments:single_experiment_home' team.slug experiment.id %}" class="link">{{ experiment.name }}</a></td>
      <td>{{ experiment.description }}</td>
      <td>{{ experiment.chatbot_prompt.name }}</td>
      <td>{{ experiment.source_material.topic }}</td>
      <td>
        <div class="flex flex-row space-x-2">
        <form method="post" action="{% url 'experiments:start_session' team.slug experiment.id %}">
          {% csrf_token %}
          <input class="btn btn-sm btn-outline btn-primary" type="submit" value="New Chat Session" />
        </form>
        <a class="btn btn-sm btn-outline btn-primary" href="{% url 'experiments:single_experiment_home' team.slug experiment.id %}" class="link">View Chats</a>
        </div>
      </td>
    </tr>
  {% endfor %}
  </tbody>
  </table>
  </div>
{% endblock %}
